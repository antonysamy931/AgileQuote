@{
    ViewBag.Title = "QuoteBoard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<script src="~/Scripts/jquery.dataTables.min.js"></script>
<link href="~/Content/jquery.dataTables.css" rel="stylesheet" />
<link href="~/Content/QuoteList.css" rel="stylesheet" />

<script src="~/Scripts/jquery.noty.js"></script>
<script src="~/Scripts/center.js"></script>
<script src="~/Scripts/default.js"></script>
<script src="~/Scripts/top.js"></script>

<script type="text/javascript">
    var AllButtonCreate = false;
    var ButtonCreate = false;
    var ApproveCount = 0;
    var ColaboratorCount = 0;
    var notyAlert = null;

    $(document).ready(function () {

        $('.submit_box').css('width', '17%');

        $.ajax({
            url: '/QuoteBoard/GetCreateQuoteListCount',            
            type: 'post',
            dataType: 'json',
            success: function (result) {
                if (result.redirect) {
                    window.location.replace(result.redirectAction);
                }
                else {
                    if (result.Result > 0) {
                        CreateReloadApproverQuoteDataTable();
                        $('#createMyQuote').css('display', 'block');
                        ButtonCreate = true;
                        AllButtonCreate = true;
                    }
                    else {
                        $('#MyQuoteContainer').css('display', 'none');
                        $('#createMyQuote').css('display', 'none');
                    }
                }
            },
            error: function (e) {
            },
            async: false
        });



        $('#CreateQuoteButton').click(function () {
            window.location.replace('/QuoteBoard/BrandNewQuote');
        });

        $('#CreateQuoteButtonApprove').click(function () {
            window.location.replace('/QuoteBoard/BrandNewQuote');
        });

        $('#CreateQuoteButtonCollaborate').click(function () {
            window.location.replace('/QuoteBoard/BrandNewQuote');
        });

        $.ajax({
            url: '/QuoteBoard/GetApproverQuoteListCount',
            type: 'post',
            dataType: 'json',
            success: function (result) {
                if (result.redirect) {
                    window.location.replace(result.redirectAction);
                }
                else {
                    if (result.Result > 0) {
                        if (ButtonCreate !== true) {
                            $('#createApproveQuote').css('display', 'block');
                            $('#ApproveQuoteContainer').css('margin-top', '2%');
                            ButtonCreate = true;
                            AllButtonCreate = true;
                        }
                        else {
                            $('#createApproveQuote').css('display', 'none');
                        }
                        ApproverReloadApproverQuoteDataTable();
                    }
                    else {
                        $('#createApproveQuote').css('display', 'none');
                        $('#ApproveQuoteContainer').css('display', 'none');
                    }
                }
            },
            error: function (e) {
            },
            async: false
        });



        $('#ApproverQuoteApproveComments_close').click(function () {
            $('#ApproverQuoteApproveComments').fadeOut(300);
            $('#mask').fadeOut(300);
        });

        $('#ApproverQuoteRemoveComments_close').click(function () {
            $('#ApproverQuoteRemoveComments').fadeOut(300);
            $('#mask').fadeOut(300);
        });

        $('#ApproverQuoteApproveCommentsButton').click(function () {

            var quoteId = $('#ApproverQuoteApproveCommentsQuoteID').val();
            var value = $('#ApproverQuoteApproveCommentsbox').val();


            $.ajax({
                url: '/QuoteList/ApproveQuote?QuoteID=' + quoteId + '&Description=' + value,
                type: 'post',
                dataType: 'json',
                success: function (result) {
                    if (result.redirect) {
                        window.location.replace(result.redirectAction);
                    }
                },
                error: function (e) {
                },
                async: false
            });
        });

        $('#ApproverQuoteRemoveCommentsButton').click(function () {

            var quoteId = $('#ApproverQuoteRemoveCommentsQuoteID').val();
            var value = $('#ApproverQuoteRemoveCommentsbox').val();
            if (value === '') {
                $.noty.closeAll();
                notyAlert = noty({
                    text: "Please enter your comments",
                    type: 'error',
                    buttons: [{
                        addClass: 'btn btn-primary', text: 'OK', onClick: function ($noty) {
                            $noty.close();
                        }
                    }]
                });
            }
            else {


                $.ajax({
                    url: '/QuoteList/RejectQuote?QuoteID=' + quoteId + '&Description=' + value,
                    type: 'post',
                    dataType: 'json',
                    success: function (result) {
                        if (result.redirect) {
                            window.location.replace(result.redirectAction);
                        }
                    },
                    error: function (e) {
                    },
                    async: false
                });


            }
        });

        $.ajax({
            url: '/QuoteBoard/GetCollaboraterQuoteListCount',
            type: 'post',
            dataType: 'json',
            success: function (result) {
                if (result.redirect) {
                    window.location.replace(result.redirectAction);
                }
                else {
                    if (result.Result > 0) {
                        if (ButtonCreate !== true) {
                            ButtonCreate = true;
                            AllButtonCreate = true;
                            $('#createCollaborator').css('display', 'block');
                            $('#CollaboratorQuoteContainer').css('margin-top', '2%');
                        }
                        else {
                            $('#createCollaborator').css('display', 'none');
                        }
                        ReloadCollaboratorQuoteDataTable();
                    }
                    else {
                        $('#createCollaborator').css('display', 'none');
                        $('#CollaboratorQuoteContainer').css('display', 'none');
                    }
                }
            },
            error: function (e) {
            },
            async: false
        });


        $('#CollabratorQuoteComments_close').click(function () {
            $('#CollabratorQuoteComments').fadeOut(300);
            $('#mask').fadeOut(300);
        });

        $('#CollabratorQuoteCommentsButton').click(function () {
            var value = $('#CollabratorQuoteCommentsbox').val();
            var quoteId = $('#CollaboratorQuoteID').val();
            if (value === '') {
                $.noty.closeAll();
                notyAlert = noty({
                    text: "Please enter your comments",
                    type: 'error',
                    buttons: [{
                        addClass: 'btn btn-primary', text: 'OK', onClick: function ($noty) {
                            $noty.close();
                        }
                    }]
                });
            }
            else {
                $.ajax({
                    url: '/QuoteCollabrator/UpdateCollabratorToQuote?QuoteID=' + quoteId + '&QuoteStatusDescription=' + value,
                    type: 'post',
                    dataType: 'json',
                    success: function (result) {
                        if (result.redirect) {
                            window.location.replace(result.redirectAction);
                        }
                        else {
                            ReloadCollaboratorQuoteDataTable();
                            $('#CollabratorQuoteComments').fadeOut(300);
                            $('#mask').fadeOut(300);
                        }
                    },
                    error: function (e) {
                    },
                    async: false
                });
            }
        });

        if (AllButtonCreate === false) {
            $('#CreateQuoteButtonContainer').css('display', 'block');
        }

        $('#createnewQuoteWithoutcount').click(function () {
            window.location.replace('/QuoteBoard/BrandNewQuote');
        });

    });

    function CreateReloadApproverQuoteDataTable() {
        //var quoteID = $('#QuoteID').val();
        $('table').css('width', '100%');
        $("#MyQuoteQuoteDataTable_length").empty();

        $('#MyQuoteQuoteDataTable').dataTable({
            "aaData": [
            /* Reduced data set */
            ["Trident", "Internet Explorer 4.0", "Win 95+", 4, "X"],
            ["Trident", "Internet Explorer 5.0", "Win 95+", 5, "C"],
            ["Trident", "Internet Explorer 5.5", "Win 95+", 5.5, "A"],
            ["Trident", "Internet Explorer 6.0", "Win 98+", 6, "A"],
            ["Trident", "Internet Explorer 7.0", "Win XP SP2+", 7, "A"],
            ["Gecko", "Firefox 1.5", "Win 98+ / OSX.2+", 1.8, "A"],
            ["Gecko", "Firefox 2", "Win 98+ / OSX.2+", 1.8, "A"],
            ["Gecko", "Firefox 3", "Win 2k+ / OSX.3+", 1.9, "A"],
            ["Webkit", "Safari 1.2", "OSX.3", 125.5, "A"],
            ["Webkit", "Safari 1.3", "OSX.3", 312.8, "A"],
            ["Webkit", "Safari 2.0", "OSX.4+", 419.3, "A"],
            ["Webkit", "Safari 3.0", "OSX.4+", 522.1, "A"]
            ],
            "bServerSide": true,
            "sAjaxSource": "/QuoteBoard/GetMyQuoteQuoteDatatableList",
            "bProcessing": true,
            "sPaginationType": "full_numbers",
            //"iDisplayLength": 1,
            "bDestroy": true,
            "aoColumns": [
                        { "sTitle": "Quote Id", "sName": "qQuoteID" },
                        { "sTitle": "Quote Name", "sName": "qQuoteName" },
                        { "sTitle": "Sales Organization Name", "sName": "qSalesOrganization" },
                        { "sTitle": "Customer Name", "sName": "qCustomerName" },
                        { "sTitle": "Prepared By", "sName": "qPrepareBy" },
                        { "sTitle": "Created Date", "sName": "displayCreateDate" },
                        { "sTitle": "Required Date", "sName": "displayRequireDate" },
                        { "sTitle": "Status", "sName": "Status" },
                        { "sTitle": "Type", "sName": "AccessType", "sClass": "DisplayNone" },
                        {
                            "sTitle": "",
                            "sName": "qQuoteID",
                            "bSearchable": false,
                            "bSortable": false,
                            "fnRender": function (obj) {
                                return '<a href="#" id=' + obj.aData[0] + ' type=' + obj.aData[8] + ' onclick="javascript:CreateEditFunction(this)"><img src="/Content/images/edit.png" alt="EDIT" title="Edit" /></a>'
                            }
                        },
                        {
                            "sTitle": "",
                            "sName": "qQuoteID",
                            "bSearchable": false,
                            "bSortable": false,
                            "fnRender": function (obj) {

                                if (obj.aData[7] !== "Rejected" && obj.aData[7] !== "Pending Approval" && obj.aData[7] !== "Waiting Collaborate") {
                                    return '<a href="#"><div class="delete" title="Delete" id=' + obj.aData[0] + ' onclick="javascript:CreateDeleteFuction(this)" ><img src="/Content/images/error.png" alt="img1" /></div></a>'
                                }
                                else {
                                    return '<div class="delete" title="Delete" id=' + obj.aData[0] + ' ><img src="/Content/images/error-disable.png" alt="img1" /></div>'
                                }
                            }
                        }
            ]
        });


    }

    function CreateEditFunction(data) {
        window.location.replace('/QuoteList/CreateQuote?QuoteID=' + data.id + '&Type=' + data.type + '&Edit');
    }

    function CreateDeleteFuction(data) {
        notyAlert = noty({
            text: "Are you sure to reject this quote?",
            type: 'error',
            buttons: [{
                addClass: 'btn btn-primary', text: 'YES', onClick: function ($noty) {
                    $noty.close();
                    var description = prompt("Enter your comments");
                    if (description != null) {
                        $.ajax({
                            url: '/QuoteList/CreatorRejectQuote?QuoteID=' + data.id + '&Description=' + description,
                            type: 'post',
                            dataType: 'json',
                            success: function (result) {
                                if (result.redirect) {
                                    window.location.replace(result.redirectAction);
                                }
                                else {
                                    $.noty.closeAll();
                                    notyAlert = noty({
                                        text: result.Result,
                                        type: 'error',
                                        buttons: [{
                                            addClass: 'btn btn-primary', text: 'OK', onClick: function ($noty) {
                                                $noty.close();
                                            }
                                        }]
                                    });
                                }
                            },
                            error: function (e) {
                            },
                            async: false
                        });
                    }
                }
            },
            {
                addClass: 'btn btn-danger', text: 'CANCEL', onClick: function ($noty) {
                    $noty.close();
                }
            }]
        });
        return false;
    }

    function ApproverReloadApproverQuoteDataTable() {
        //var quoteID = $('#QuoteID').val();
        $('table').css('width', '100%');

        $('#ApproveQuoteDataTable').dataTable({
            "aaData": [
            /* Reduced data set */
            ["Trident", "Internet Explorer 4.0", "Win 95+", 4, "X"],
            ["Trident", "Internet Explorer 5.0", "Win 95+", 5, "C"],
            ["Trident", "Internet Explorer 5.5", "Win 95+", 5.5, "A"],
            ["Trident", "Internet Explorer 6.0", "Win 98+", 6, "A"],
            ["Trident", "Internet Explorer 7.0", "Win XP SP2+", 7, "A"],
            ["Gecko", "Firefox 1.5", "Win 98+ / OSX.2+", 1.8, "A"],
            ["Gecko", "Firefox 2", "Win 98+ / OSX.2+", 1.8, "A"],
            ["Gecko", "Firefox 3", "Win 2k+ / OSX.3+", 1.9, "A"],
            ["Webkit", "Safari 1.2", "OSX.3", 125.5, "A"],
            ["Webkit", "Safari 1.3", "OSX.3", 312.8, "A"],
            ["Webkit", "Safari 2.0", "OSX.4+", 419.3, "A"],
            ["Webkit", "Safari 3.0", "OSX.4+", 522.1, "A"]
            ],
            "bServerSide": true,
            "sAjaxSource": "/QuoteBoard/GetApproveWithCollabrationQuoteDatatableList",
            "bProcessing": true,
            "sPaginationType": "full_numbers",
            //"iDisplayLength": 1,
            "bDestroy": true,
            "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                if (aData[9] === '1') {

                    if (iDisplayIndex % 2 === 0) {
                        $('td:eq(2)', nRow).parent('tr').css('background-color', '#fff3e6');
                    }
                    else {
                        $('td:eq(2)', nRow).parent('tr').css('background-color', '#ffe8ce');
                    }

                    ApproveCount++;
                    $('#ApproveVerifyCount p').text(ApproveCount);
                    $('#ApproveVerifyCount').css('display', 'block');
                }
                return nRow;
            },
            "aoColumns": [
                        { "sTitle": "Quote Id", "sName": "qQuoteID" },
                        { "sTitle": "Quote Name", "sName": "qQuoteName" },
                        { "sTitle": "Sales Organization Name", "sName": "qSalesOrganization" },
                        { "sTitle": "Customer Name", "sName": "qCustomerName" },
                        { "sTitle": "Prepared By", "sName": "qPrepareBy" },
                        { "sTitle": "Created Date", "sName": "displayCreateDate" },
                        { "sTitle": "Required Date", "sName": "displayRequireDate" },
                        { "sTitle": "Status", "sName": "Status" },
                        { "sTitle": "Type", "sName": "AccessType", "sClass": "DisplayNone" },
                        { "sTitle": "Level", "sName": "qLevel", "sClass": "DisplayNone" },
                        {
                            "sTitle": "",
                            "sName": "qQuoteID",
                            "bSearchable": false,
                            "bSortable": false,
                            "fnRender": function (obj) {
                                return '<a href="#" id=' + obj.aData[0] + ' type=' + obj.aData[8] + ' onclick="javascript:ApproverEditFunction(this)"><img src="/Content/images/edit.png" alt="EDIT" title="View" /></a>'
                            }
                        },
                        {
                            "sTitle": "",
                            "sName": "qQuoteID",
                            "bSearchable": false,
                            "bSortable": false,
                            "fnRender": function (obj) {
                                //if (obj.aData[8] === 'Collaborate') {
                                //    if (obj.aData[7] !== "Rejected") {
                                //        return '<a href="#"><div class="delete" id=' + obj.aData[0] + ' onclick="javascript:DeleteCollabratorFuction(this)" ><img src="/Content/images/error.png" alt="img1" title="Reject" /></div></a>'
                                //    }
                                //    else {
                                //        return '<div class="delete" title="Reject" id=' + obj.aData[0] + ' ><img src="/Content/images/error-disable.png" alt="img1" /></div>'
                                //    }
                                //}
                                //else
                                if (obj.aData[8] === 'Authorize') {
                                    if (obj.aData[7] !== "Rejected") {
                                        return '<a href="#"><div class="delete" title="Reject" id=' + obj.aData[0] + ' onclick="javascript:ApproverDeleteFuction(this)" ><img src="/Content/images/error.png" alt="img1" /></div></a>'
                                    }
                                    else {
                                        return '<div class="delete" title="Reject" id=' + obj.aData[0] + ' ><img src="/Content/images/error-disable.png" alt="img1" /></div>'
                                    }
                                }
                            }
                        },
                        {
                            "sTitle": "",
                            "sName": "qQuoteID",
                            "bSearchable": false,
                            "bSortable": false,
                            "fnRender": function (obj) {
                                //if (obj.aData[8] === 'Collaborate') {
                                //    if (obj.aData[7] !== "Authorized") {
                                //        return '<a href="#"><div class="tick" title="Approve" id=' + obj.aData[0] + ' onclick="javascript:AcceptCollabratorFunction(this)"><img src="/Content/images/tick.png" alt="img1" /></div></a>'
                                //    }
                                //    else {
                                //        return '<div class="tick" title="Approve" id=' + obj.aData[0] + '><img src="/Content/images/tick-disable.png" alt="img1" /></div>'
                                //    }
                                //}
                                //else 
                                if (obj.aData[8] === 'Authorize') {
                                    if (obj.aData[7] !== "Approved") {
                                        return '<a href="#"><div class="tick" title="Approve" id=' + obj.aData[0] + ' onclick="javascript:ApproverAcceptFunction(this)"><img src="/Content/images/tick.png" alt="img1" /></div></a>'
                                    }
                                    else {
                                        return '<div class="tick" title="Approve" id=' + obj.aData[0] + '><img src="/Content/images/tick-disable.png" alt="img1" /></div>'
                                    }
                                }
                                //else {
                                //    return '<div class="tick" title="Accept" id=' + obj.aData[0] + '><img src="/Content/images/tick-disable.png" alt="img1" /></div>'
                                //}
                            }
                        }
            ]
        });


    }

    function ApproverEditFunction(data) {
        window.location.replace('/Summary/QuoteSummary?QuoteID=' + data.id + '&Approver');
    }

    function ApproverDeleteFuction(data) {
        notyAlert = noty({
            text: "Are you sure to reject this quote?",
            type: 'error',
            buttons: [{
                addClass: 'btn btn-primary', text: 'YES', onClick: function ($noty) {
                    $noty.close();
                    $('#ApproverQuoteRemoveCommentsQuoteID').val(data.id);
                    var popMargTop = ($('#ApproverQuoteRemoveComments').height() + 24) / 2;
                    var popMargLeft = ($('#ApproverQuoteRemoveComments').width() + 24) / 2;

                    $('#ApproverQuoteRemoveComments').css({
                        'margin-top': -popMargTop,
                        'margin-left': -popMargLeft
                    });

                    // Add the mask to body
                    $('body').append('<div id="mask"></div>');
                    $('#mask').fadeIn(300);
                    //Fade in the Popup
                    $('#ApproverQuoteRemoveComments').fadeIn(300);
                }
            },
            {
                addClass: 'btn btn-danger', text: 'CANCEL', onClick: function ($noty) {
                    $noty.close();
                }
            }]
        });        
        return false;
    }

    function ApproverAcceptFunction(data) {
        notyAlert = noty({
            text: "Are you sure to approve this quote?",
            type: 'success',
            buttons: [{
                addClass: 'btn btn-primary', text: 'YES', onClick: function ($noty) {
                    $noty.close();
                    $('#ApproverQuoteApproveCommentsQuoteID').val(data.id);
                    var popMargTop = ($('#ApproverQuoteApproveComments').height() + 24) / 2;
                    var popMargLeft = ($('#ApproverQuoteApproveComments').width() + 24) / 2;

                    $('#ApproverQuoteApproveComments').css({
                        'margin-top': -popMargTop,
                        'margin-left': -popMargLeft
                    });

                    // Add the mask to body
                    $('body').append('<div id="mask"></div>');
                    $('#mask').fadeIn(300);
                    //Fade in the Popup
                    $('#ApproverQuoteApproveComments').fadeIn(300);
                }
            },
            {
                addClass: 'btn btn-danger', text: 'CANCEL', onClick: function ($noty) {
                    $noty.close();
                }
            }]
        });
        return false;
    }

    function ReloadCollaboratorQuoteDataTable() {
        //var quoteID = $('#QuoteID').val();
        $('table').css('width', '100%');

        $('#CollaborateQuoteUserDataTable').dataTable({
            "aaData": [
            /* Reduced data set */
            ["Trident", "Internet Explorer 4.0", "Win 95+", 4, "X"],
            ["Trident", "Internet Explorer 5.0", "Win 95+", 5, "C"],
            ["Trident", "Internet Explorer 5.5", "Win 95+", 5.5, "A"],
            ["Trident", "Internet Explorer 6.0", "Win 98+", 6, "A"],
            ["Trident", "Internet Explorer 7.0", "Win XP SP2+", 7, "A"],
            ["Gecko", "Firefox 1.5", "Win 98+ / OSX.2+", 1.8, "A"],
            ["Gecko", "Firefox 2", "Win 98+ / OSX.2+", 1.8, "A"],
            ["Gecko", "Firefox 3", "Win 2k+ / OSX.3+", 1.9, "A"],
            ["Webkit", "Safari 1.2", "OSX.3", 125.5, "A"],
            ["Webkit", "Safari 1.3", "OSX.3", 312.8, "A"],
            ["Webkit", "Safari 2.0", "OSX.4+", 419.3, "A"],
            ["Webkit", "Safari 3.0", "OSX.4+", 522.1, "A"]
            ],
            "bServerSide": true,
            "sAjaxSource": "/QuoteBoard/GetCollaboratorQuoteDatatableList",
            "bProcessing": true,
            "sPaginationType": "full_numbers",
            //"iDisplayLength": 1,
            "bDestroy": true,
            "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                if (aData[9] === '1') {

                    if (iDisplayIndex % 2 === 0) {
                        $('td:eq(2)', nRow).parent('tr').css('background-color', '#fff3e6');
                    }
                    else {
                        $('td:eq(2)', nRow).parent('tr').css('background-color', '#ffe8ce');
                    }

                    ColaboratorCount++;
                    $('#ColaboratorVerifyCount p').text(ColaboratorCount);
                    $('#ColaboratorVerifyCount').css('display', 'block');
                }
                return nRow;
            },
            "aoColumns": [
                        { "sTitle": "Quote Id", "sName": "qQuoteID" },
                        { "sTitle": "Quote Name", "sName": "qQuoteName" },
                        { "sTitle": "Sales Organization Name", "sName": "qSalesOrganization" },
                        { "sTitle": "Customer Name", "sName": "qCustomerName" },
                        { "sTitle": "Prepared By", "sName": "qPrepareBy" },
                        { "sTitle": "Created Date", "sName": "displayCreateDate" },
                        { "sTitle": "Required Date", "sName": "displayRequireDate" },
                        { "sTitle": "Status", "sName": "Status" },
                        { "sTitle": "Type", "sName": "AccessType", "sClass": "DisplayNone" },
                        { "sTitle": "Level", "sName": "qLevel", "sClass": "DisplayNone" },
                        {
                            "sTitle": "",
                            "sName": "qQuoteID",
                            "bSearchable": false,
                            "bSortable": false,
                            "fnRender": function (obj) {
                                return '<a href="#" id=' + obj.aData[0] + ' type=' + obj.aData[8] + ' onclick="javascript:CollaborateEditFunction(this)"><img src="/Content/images/edit.png" alt="EDIT" title="View" /></a>'
                            }
                        },
                        //{
                        //    "sTitle": "",
                        //    "sName": "qQuoteID",
                        //    "bSearchable": false,
                        //    "bSortable": false,
                        //    "fnRender": function (obj) {
                        //        if (obj.aData[8] === 'Collaborate') {
                        //            if (obj.aData[7] !== "Rejected") {
                        //                return '<a href="#"><div class="delete" id=' + obj.aData[0] + ' onclick="javascript:DeleteCollabratorFuction(this)" ><img src="/Content/images/error.png" alt="img1" title="Reject" /></div></a>'
                        //            }
                        //            else {
                        //                return '<div class="delete" title="Reject" id=' + obj.aData[0] + ' ><img src="/Content/images/error-disable.png" alt="img1" /></div>'
                        //            }
                        //        }                                
                        //    }
                        //},
                        {
                            "sTitle": "",
                            "sName": "qQuoteID",
                            "bSearchable": false,
                            "bSortable": false,
                            "fnRender": function (obj) {
                                if (obj.aData[8] === 'Collaborate') {
                                    if (obj.aData[7] !== "Approved") {
                                        return '<a href="#"><div class="tick" title="Comments" id=' + obj.aData[0] + ' onclick="javascript:AcceptCollabratorFunction(this)"><img src="/Content/images/tick.png" alt="img1" /></div></a>'
                                    }
                                    else {
                                        return '<div class="tick" title="Comments" id=' + obj.aData[0] + '><img src="/Content/images/tick-disable.png" alt="img1" /></div>'
                                    }
                                }
                            }
                        }
            ]
        });


    }

    function CollaborateEditFunction(data) {
        window.location.replace('/Summary/QuoteSummary?QuoteID=' + data.id + '&Collaborate');
    }

    function AcceptCollabratorFunction(data) {


        $.ajax({
            url: "/QuoteCollabrator/GetCollabratorRemarks?QuoteID=" + data.id,
            type: 'post',
            datatype: 'json',
            success: function (result) {
                if (result.redirect) {
                    window.location.replace(result.redirectAction);
                }
                else {
                    if (result.Result !== null) {
                        $('#CollabratorRemaks').text(result.Result);
                    }
                }
            },
            error: function (e) {
            },
            async: false
        });

        $('#CollaboratorQuoteID').val(data.id);
        var popMargTop = ($('#CollabratorQuoteComments').height() + 24) / 2;
        var popMargLeft = ($('#CollabratorQuoteComments').width() + 24) / 2;

        $('#CollabratorQuoteComments').css({
            'margin-top': -popMargTop,
            'margin-left': -popMargLeft
        });

        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);
        //Fade in the Popup
        $('#CollabratorQuoteComments').fadeIn(300);
    }

</script>
<div id="QuoteBoardContainer">
    <div id="MyQuoteContainer">
        <section class="c12 main-title" style="margin-top: 30px;">
            <div class="c6 quote">
                <img src="~/Content/images/qoute-ion.png" alt="img1">
                <p>My Quotes</p>
            </div>
        </section>
        <section>
            <div class="table_top" style="display: none;">
                <div class="list_select">
                    <span>Select:</span>
                    <label>
                        <select></select></label>
                    <span>0 item selected</span>
                </div>
                <div class="list_select_action">
                    <span>Actions:</span>
                    <label>
                        <select></select></label>
                    <input type="button" value="Submit">
                </div>
            </div>
            <div class="create">
                <div class="greay_box whitebox">
                    <div>
                        <p>
                            Here’s the full list of quotes created by you
                        </p>
                        <div class="quote_list">
                            <table id="MyQuoteQuoteDataTable"></table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="clear"></div>
    </div>

    <div id="createMyQuote" style="display: none;">
        <div class="submit_box" style="margin: 0 0 0 12px;">
            <input type="button" id="CreateQuoteButton" value="Create New Quote" style="margin-bottom: 5%;">
        </div>
    </div>

    <div id="ApproveQuoteContainer">
        <section class="c12 main-title">
            <div class="c6 quote">
                <img src="~/Content/images/qoute-ion.png" alt="img1">
                <p>Approve Quote</p><div id="ApproveVerifyCount" class="notification" style="display:none;"><p></p></div>
            </div>
        </section>
        <section>
            <div class="table_top" style="display: none;">
                <div class="list_select">
                    <span>Select:</span>
                    <label>
                        <select></select></label>
                    <span>0 item selected</span>
                </div>
                <div class="list_select_action">
                    <span>Actions:</span>
                    <label>
                        <select></select></label>
                    <input type="button" value="Submit">
                </div>
            </div>
            <div class="create">
                <div class="greay_box whitebox">
                    <div>
                        <p>
                            Please review the following quotes created by others 
                        </p>
                        <div class="quote_list">
                            <table id="ApproveQuoteDataTable"></table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="clear"></div>
    </div>

    <div id="createApproveQuote" style="display: none;">
        <div class="submit_box" style="margin: 0 0 0 12px;">
            <input type="button" id="CreateQuoteButtonApprove" value="Create New Quote" style="margin-bottom: 5%;">
        </div>
    </div>

    <div id="CollaboratorQuoteContainer">
        <section class="c12 main-title">
            
            <div class="c6 quote">
                <img src="~/Content/images/qoute-ion.png" alt="img1">
                <p>Collaborate</p><div id="ColaboratorVerifyCount" class="notification" style="display:none;"><p></p></div>
            </div>
        </section>
        <section>
            <div class="table_top" style="display: none;">
                <div class="list_select">
                    <span>Select:</span>
                    <label>
                        <select></select></label>
                    <span>0 item selected</span>
                </div>
                <div class="list_select_action">
                    <span>Actions:</span>
                    <label>
                        <select></select></label>
                    <input type="button" value="Submit">
                </div>
            </div>
            <div class="create">
                <div class="greay_box whitebox">
                    <div>
                        <p>
                            Please weigh in on the following quotes created by others
                        </p>
                        <div class="quote_list">
                            <table id="CollaborateQuoteUserDataTable"></table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="clear"></div>
    </div>

    <div id="createCollaborator" style="display: none;">
        <div class="submit_box" style="margin: 0 0 0 12px;">
            <input type="button" id="CreateQuoteButtonCollaborate" value="Create New Quote" style="margin-bottom: 5%;">
        </div>
    </div>

    <div id="CreateQuoteButtonContainer" style="display:none;">
        <section class="c12 main-title" style="margin-top: 30px;">
            <div class="c6 quote">
                <img src="~/Content/images/qoute-ion.png" alt="img1">
                <p>Create Quote</p>
            </div>
        </section>
        <div">
            <div class="submit_box" style="margin: 0 0 0 12px;">
                <input type="button" id="createnewQuoteWithoutcount" value="Create New Quote" style="margin: 5%;">
            </div>
        </div>
    </div>

</div>
<div class="light-popup" id="ApproverQuoteApproveComments">
    <a href="#" class="close" id="ApproverQuoteApproveComments_close">
        <img src="/Content/images/fancy_close.png" class="btn_close" title="Close Window" alt="Close" /></a>
    <div class="Title">
        Enter Your Comments
    </div>
    <div id="ApproverQuoteApproveCommentsLightBox" class="popup-center">
        <div class="create">
            <input type="hidden" id="ApproverQuoteApproveCommentsQuoteID" />
            <input type="hidden" id="ApproverQuoteApproveCommentsStatus" />
            <textarea id="ApproverQuoteApproveCommentsbox" cols="40" rows="15"></textarea>
        </div>
        <div class="clear"></div>
    </div>

    <div class="accord_btns center" style="text-align: center !important;">
        <input type="button" id="ApproverQuoteApproveCommentsButton" value="Submit" />
    </div>
    <div class="clear"></div>
</div>

<div class="light-popup" id="ApproverQuoteRemoveComments">
    <a href="#" class="close" id="ApproverQuoteRemoveComments_close">
        <img src="/Content/images/fancy_close.png" class="btn_close" title="Close Window" alt="Close" /></a>
    <div class="Title">
        Enter Your Comments
    </div>
    <div id="ApproverQuoteRemoveCommentsLightBox" class="popup-center">
        <div class="create">
            <input type="hidden" id="ApproverQuoteRemoveCommentsQuoteID" />
            <input type="hidden" id="ApproverQuoteRemoveCommentsStatus" />
            <textarea id="ApproverQuoteRemoveCommentsbox" cols="40" rows="15"></textarea>
        </div>
        <div class="clear"></div>
    </div>

    <div class="accord_btns center" style="text-align: center !important;">
        <input type="button" id="ApproverQuoteRemoveCommentsButton" value="Submit" />
    </div>
    <div class="clear"></div>
</div>

<div class="light-popup" id="CollabratorQuoteComments">
    <a href="#" class="close" id="CollabratorQuoteComments_close">
        <img src="/Content/images/fancy_close.png" class="btn_close" title="Close Window" alt="Close" /></a>
    <div class="Title">
        Collaborate Comments
    </div>
    <div id="CollabratorQuoteCommentsLightBox" class="popup-center">
        <div class="create">
            <input type="hidden" id="CollaboratorQuoteID" />
            <input type="hidden" id="ColabratorStatus" />
                
            <label>Quote Owner's Comments</label>
            <textarea id="CollabratorRemaks" cols="1" rows="1" disabled="disabled"></textarea>
            <label>Enter Your Comments</label>
            <textarea id="CollabratorQuoteCommentsbox" cols="5" rows="5"></textarea>

            @*<p id="CollabratorRemaks"></p>
            <textarea id="CollabratorQuoteCommentsbox" cols="40" rows="15"></textarea>*@

        </div>
        <div class="clear"></div>
    </div>

    <div class="accord_btns center" style="text-align: center !important;">
        <input type="button" id="CollabratorQuoteCommentsButton" value="Submit" />
    </div>
    <div class="clear"></div>
</div>


